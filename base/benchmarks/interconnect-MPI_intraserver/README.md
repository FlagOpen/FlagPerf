# 评测原理

1. 使用all_reduce方法，进行单机多卡的MPI互联操作，计算服务器内MPI互联带宽
2. 此方法仅进行数据累加与传输，不对torch中的梯度等进行处理。同时仅将数据值进行all_reduce操作，不包含创建张量等操作，适用于评测服务器内MPI互联带宽

# 适配修改规范

本评测样例配置文件如下：

```yaml
Melements: 1024
WARMUP: 100
ITERS: 1000
DIST_BACKEND: "mpi"
```

1. Melements为传输的fp32元素个数。厂商可在正整数范围内任意调整此项配置，发挥自身能力

   例如，英伟达A100-40-SXM芯片采用Melements=1024

2. WARMUP为预热所需迭代次数。厂商可在正整数范围内任意调整此值。WARMUP迭代部分不计入性能计算

3. ITERS为正式评测迭代次数。厂商可在正整数范围内调整此值，同时保证总运行时间大于等于6分钟

4. DIST_BACKEND为通讯库。在本评测样例中，用nccl实现的通信算子。厂商可任意调整为能够发挥自身互联能力的通信库

   例如，英伟达A100-40-SXM芯片采用DIST_BACKEND="nccl"
